!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define("UiTree",[],t):"object"===typeof exports?exports.UiTree=t():e.UiTree=t()}("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="https://v8.material.balmjs.com/",a(a.s="hAm+")}({IFD9:function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(n){"object"===typeof window&&(a=window)}e.exports=a},PE4B:function(e,t,a){"use strict";var n=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)};var r="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?o((a=e,Array.isArray(a)?[]:{}),e,t):e;var a}function l(e,t,a){return e.concat(t).map((function(e){return s(e,a)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function d(e,t){try{return t in e}catch(a){return!1}}function c(e,t,a){var n={};return a.isMergeableObject(e)&&i(e).forEach((function(t){n[t]=s(e[t],a)})),i(t).forEach((function(r){(function(e,t){return d(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(d(e,r)&&a.isMergeableObject(t[r])?n[r]=function(e,t){if(!t.customMerge)return o;var a=t.customMerge(e);return"function"===typeof a?a:o}(r,a)(e[r],t[r],a):n[r]=s(t[r],a))})),n}function o(e,t,a){(a=a||{}).arrayMerge=a.arrayMerge||l,a.isMergeableObject=a.isMergeableObject||n,a.cloneUnlessOtherwiseSpecified=s;var r=Array.isArray(t);return r===Array.isArray(e)?r?a.arrayMerge(e,t,a):c(e,t,a):s(t,a)}o.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,a){return o(e,a,t)}),{})};var u=o;e.exports=u},g8md:function(e,t,a){"use strict";(function(e){t.a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=null;"undefined"!==typeof window?n=window.Vue:"undefined"!==typeof e&&(n=e.Vue),n&&("directive"===a?n.directive(t.name,t):n.use(t))}}).call(this,a("IFD9"))},"hAm+":function(e,t,a){"use strict";a.r(t);var n=a("g8md"),r=a("PE4B"),s=a.n(r);const l=/(?:^\[object\s(.*?)\]$)/;var i=e=>Object.prototype.toString.call(e).replace(l,"$1").toLowerCase();const d=e=>{let{componentProps:t,propName:a,props:n}=e,r=n[a];if("object"===i(r)){const e=t[a].default;t[a].default=()=>s()(e,r)}else Array.isArray(r)?t[a].default=()=>r:t[a].default=r},c=e=>{let{componentMixins:t,propName:a,props:n}=e;if(t.length){let e=t.length;for(;e--;)if(t[e].props&&void 0!==t[e].props[a]){d({componentProps:t[e].props,propName:a,props:n});break}}};var o=(e,t)=>{for(const a of Object.keys(t))e.props?void 0===e.props[a]?c({componentMixins:e.mixins,propName:a,props:t}):d({componentProps:e.props,propName:a,props:t}):c({componentMixins:e.mixins,propName:a,props:t})};var u=(e,t)=>{for(const a of Object.keys(t))if(/^Ui[A-Z]{1}[A-Za-z]+$/.test(a)){const n=e[a],r=t[a];o(n,r)}};var h=e=>{const t={install(t){u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});for(const a in e){const n=e[a];t.component(n.name,n)}}};return Object(n.a)(t),t};const p=(e,t,a)=>{let{selectedValue:n,nodeMap:r,dataFormat:s}=e,{level:l,parentKey:i}=a,d=Object.assign({},t);const{value:c,children:o,hasChildren:u,isLeaf:h,disabled:p}=s,f=d[c],m=d[o],y=((e,t,a)=>e[t]||!a)(d,h,d[u]||m);return d.level=l,d.isRoot=!l,d.isLeaf=y,d.expanded=!1,d.selected=!Array.isArray(n)&&f===n,d.checked=Array.isArray(n)&&n.includes(f),d.parentKey=i,d.disabled=d[p],m||(d[o]=[]),y||(d.indeterminate=!1),r.has(f)||r.set(f,d),d};let f=[];class m{constructor(e){this.treeData=e}getData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const{dataFormat:n,maxLevel:r}=this.treeData,s=[],{value:l,children:i,hasChildren:d}=n;for(let c=0,o=e.length;c<o;c++){let n=p(this.treeData,e[c],{level:t,parentKey:a});const o=n[i],u=n[d]||o;t<r&&u&&(n[i]=this.getData(o,t+1,n[l])),s.push(n)}return s}static addData(e,t,a){const{dataFormat:n,nodeMap:r}=e,s=[],{value:l,children:i}=n,d=t.level+1,c=t[l];for(let o=0,u=a.length;o<u;o++){let t=p(e,a[o],{level:d,parentKey:c});t.checked&&this.setMultipleSelectedValue(e,t[l],!0),s.push(t)}t[i]=s,t.expanded=!0,r.set(c,t)}static async onExpand(e,t){if(e.loadData){const{dataFormat:a}=e;if(t[a.children]&&t[a.children].length)t.expanded=!t.expanded;else{let n=await e.loadData(t[a.value]);Array.isArray(n)?this.addData(e,t,n):console.warn("[UiTree]","Invalid data")}}else t.expanded=!t.expanded}static setSingleSelectedValue(e,t,a){const{nodeMap:n}=e,r=n.get(t);r&&(r.selected=a,e.selectedEvent={selected:a,selectedNodes:t,node:r})}static onSelect(e,t){const{dataFormat:a,selectedValue:n}=e,r=t[a.value];n&&this.setSingleSelectedValue(e,n,!1),e.selectedValue=r,this.setSingleSelectedValue(e,r,!0)}static setMultipleSelectedValue(e,t,a){const{dataFormat:n,nodeMap:r,filterParentNode:s}=e,l=r.get(t);a&&!l.indeterminate?e.selectedValue.includes(t)||(s?l.isLeaf&&e.selectedValue.push(t):e.selectedValue.push(t)):e.selectedValue=e.selectedValue.filter((e=>e!==t))}static setChildrenCheckedValue(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:s,children:l}=n;for(let i=0,d=t.length;i<d;i++){let n=Object.assign({},t[i]);const d=n[s],c=n[l],o=r.get(d);o&&(a?!o.checked&&f.push(d):o.checked&&f.push(d),o.indeterminate=!1,o.checked=a,this.setMultipleSelectedValue(e,d,a)),!n.isLeaf&&c.length&&this.setChildrenCheckedValue(e,c,a)}}static setParentCheckedValue(e,t){const{dataFormat:a,nodeMap:n}=e,{value:r,children:s}=a;if(t){const a=t[r],l=t[s],i=l.filter((e=>e.checked||e.indeterminate)),d=n.get(a);if(i.length){const t=i.filter((e=>e.checked)).length,n=t===l.length;n?!d.checked&&f.push(a):d.checked&&f.push(a),d.checked=n,d.indeterminate=!n,this.setMultipleSelectedValue(e,a,n)}else d.checked=!1,d.indeterminate=!1;t.isRoot||this.setParentCheckedValue(e,n.get(t.parentKey))}}static onCheck(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!t.checked;"boolean"===typeof a&&(n=a);const{dataFormat:r,nodeMap:s,singleChecked:l}=e,{value:i,children:d}=r,c=t[i],o=t[d];l?(t.checked=n,this.setMultipleSelectedValue(e,c,n),e.selectedEvent={checked:n,checkedNodes:[c],node:t}):(f=[c],t.isLeaf?(t.checked=n,this.setMultipleSelectedValue(e,c,n)):(t.indeterminate&&(t.indeterminate=!1,n=!0),t.checked=n,this.setMultipleSelectedValue(e,c,n),this.setChildrenCheckedValue(e,o,n)),t.isRoot||this.setParentCheckedValue(e,s.get(t.parentKey)),e.selectedEvent={checked:n,checkedNodes:f,node:t})}static async handleExpandKeys(e,t,a){const{dataFormat:n,nodeMap:r}=e;for await(let s of t){const t=s[n.value],l=r.get(t);a.includes(t)&&this.onExpand(e,l),s.children&&s.children.length&&this.handleExpandKeys(e,s.children,a)}}static async setExpanded(e,t,a){let{autoExpandParent:n,defaultExpandedKeys:r}=a;const{dataFormat:s,nodeMap:l}=e;if(n)if(r.length)this.handleExpandKeys(e,t,r);else for await(let i of t){const t=i[s.value],a=l.get(t);this.onExpand(e,a)}}static resetSelected(e,t){const{nodeMap:a}=e;for(let n=0,r=t.length;n<r;n++){const r=t[n],s=a.get(r);s&&this.onCheck(e,s,!1)}}static setSelected(e,t){const{nodeMap:a,multiple:n}=e,r=Array.isArray(t)?t:[t];for(let s=0,l=r.length;s<l;s++){const t=r[s],l=a.get(t);l&&(n?this.onCheck(e,l,!0):this.onSelect(e,l))}}static async createNode(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:s,children:l,hasChildren:i}=n,d=r.get(t),c=a[s];let o=p(e,a,{level:d.level+1,parentKey:t,checked:!1});d.isLeaf?(d[l].unshift(o),d[i]||(d[i]=!0),d.isLeaf=!1):d[i]?d[l].length?d[l].unshift(o):await this.onExpand(e,d):(d[l].unshift(o),d[i]=!0,d.expanded=!0),r.set(t,d),r.set(c,o)}static updateNode(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:s,children:l}=n,i=a[s],d=r.get(i);Object.keys(d).forEach((e=>{"undefined"!==typeof a[e]&&(d[e]=a[e])}));const c=r.get(t),o=c[l].findIndex((e=>e[s]===i));c[l][o]=d,r.set(t,c),r.set(i,d)}static deleteNode(e,t,a){const{dataFormat:n,nodeMap:r}=e,{value:s,children:l,hasChildren:i}=n,d=a[s];if(r.has(d)){const e=r.get(t),a=e[l];a.splice(a.findIndex((e=>e[s]===d)),1),e[i]=a.length,e[i]||(e.isLeaf=!0,e.expanded=!1),r.set(t,e),r.delete(d)}}}function y(e,t,a,n,r,s,l,i){var d,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),l?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=d):r&&(d=i?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(c.functional){c._injectStyles=d;var o=c.render;c.render=function(e,t){return d.call(t),o(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:c}}var b=y({name:"MdcCheckbox",props:{checked:{type:[Boolean,null],default:null},indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},watch:{indeterminate(e){this.$refs.checkbox.indeterminate=e},disabled(e){this.$refs.checkbox.disabled=e}},mounted(){this.indeterminate&&(this.$refs.checkbox.indeterminate=this.indeterminate),this.disabled&&(this.$refs.checkbox.disabled=this.disabled)},methods:{reset(){this.$refs.checkbox.indeterminate?this.$refs.checkbox.indeterminate=!1:this.$refs.checkbox.checked=!1}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mdc-checkbox"},[e._t("default",(function(){return[t("input",{ref:"checkbox",staticClass:"mdc-checkbox__native-control",attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.checked}})]})),e._v(" "),t("div",{staticClass:"mdc-checkbox__background"},[t("svg",{staticClass:"mdc-checkbox__checkmark",attrs:{viewBox:"0 0 24 24"}},[t("path",{staticClass:"mdc-checkbox__checkmark-path",attrs:{fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}})]),e._v(" "),t("div",{staticClass:"mdc-checkbox__mixedmark"})]),e._v(" "),t("div",{staticClass:"mdc-checkbox__ripple"})],2)}),[],!1,null,null,null).exports,v={cssClasses:{icon:"material-icons"}},_=y({name:"UiTreeNode",components:{MdcCheckbox:b},props:{children:{type:Array,default:()=>[]},treeData:{type:Object,default:()=>({})}},data(){return{UI_GLOBAL:v,dataFormat:this.treeData.dataFormat}},methods:{handleExpand(e){m.onExpand(this.treeData,e)},handleSelect(e){m.onSelect(this.treeData,e)},handleCheck(e){e.disabled||m.onCheck(this.treeData,e)},getData(e){const{children:t,...a}=e;return e[this.dataFormat.isLeaf]?e:a}}},(function(){var e=this,t=e._self._c;return t("ul",e._l(e.children,(function(a,n){return t("li",{key:n,class:["mdc-tree-node",{"mdc-tree-node--root":a.isRoot,"mdc-tree-node--leaf":a.isLeaf}]},[t("div",{class:["mdc-tree-node__content",{"mdc-tree-node--selected":a.selected||a.checked}]},[e._t("before",null,{data:e.getData(a)}),e._v(" "),a.level?t("div",{staticClass:"mdc-tree-node__indent"},e._l(a.level,(function(e){return t("span",{key:e,staticClass:"mdc-tree-node__indent-unit"})})),0):e._e(),e._v(" "),t("div",{staticClass:"mdc-tree-node__icon"},[a[e.dataFormat.isLeaf]?e._e():t("span",{on:{click:function(t){return e.handleExpand(a)}}},[a.expanded?[e._t("expand-more-icon",(function(){return[t("i",{class:e.UI_GLOBAL.cssClasses.icon,attrs:{"aria-hidden":"true"}},[e._v("\n                expand_more\n              ")])]}))]:[e._t("expand-less-icon",(function(){return[t("i",{class:e.UI_GLOBAL.cssClasses.icon,attrs:{"aria-hidden":"true"}},[e._v("\n                chevron_right\n              ")])]}))]],2)]),e._v(" "),e.treeData.multiple?t("div",{staticClass:"mdc-tree-node__checkbox",on:{click:function(t){return e.handleCheck(a)}}},[a[e.dataFormat.isLeaf]?t("mdc-checkbox",{attrs:{checked:a.checked,disabled:a.disabled}}):t("mdc-checkbox",{attrs:{checked:a.checked,indeterminate:a.indeterminate,disabled:a.disabled}})],1):e._e(),e._v(" "),t("label",{staticClass:"mdc-tree-node__label",on:{click:function(t){if(t.target!==t.currentTarget)return null;t.preventDefault(),e.treeData.multiple?e.handleCheck(a):e.handleSelect(a)}}},[e._t("title",(function(){return[e._v(e._s(a[e.dataFormat.label]))]}),{data:e.getData(a)})],2),e._v(" "),e._t("after",null,{data:e.getData(a)})],2),e._v(" "),!a[e.dataFormat.isLeaf]&&a.expanded?t("ui-tree-node",{staticClass:"mdc-tree-node__children",attrs:{children:a[e.dataFormat.children],"tree-data":e.treeData},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)},[e._l(e.$slots,(function(t,a){return e._t(a,null,{slot:a})}))],2):e._e()],1)})),0)}),[],!1,null,null,null).exports;const g={label:"label",value:"value",children:"children",hasChildren:"hasChildren",isLeaf:"isLeaf",disabled:"disabled"},k={CHANGE:"change",SELECTED:"selected"};var x={name:"UiTree",components:{UiTreeNode:_},model:{prop:"selectedNodes",event:k.CHANGE},props:{selectedNodes:{type:[String,Array],default:""},filterParentNode:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},dataFormat:{type:Object,default:()=>({})},maxLevel:{type:Number,default:0},multiple:{type:Boolean,default:!1},singleChecked:{type:Boolean,default:!1},loadData:{type:[Function,null],default:null},autoExpandParent:{type:Boolean,default:!1},defaultExpandedKeys:{type:Array,default:()=>[]}},data(){return{$tree:null,nodeList:[],treeData:{dataFormat:Object.assign(g,this.dataFormat),maxLevel:this.maxLevel,nodeMap:new Map,selectedValue:this.selectedNodes,filterParentNode:this.filterParentNode,multiple:this.multiple,singleChecked:this.singleChecked,loadData:this.loadData,selectedEvent:{}}}},computed:{className(){return{"mdc-tree":!0,"mdc-tree--multiple":this.multiple}},selectedValue(){return this.treeData.selectedValue}},watch:{selectedNodes(e,t){Array.isArray(e)?((e,t)=>{for(const a of new Set([...e,...t]))if(e.filter((e=>e===a)).length!==t.filter((e=>e===a)).length)return!1;return!0})(this.treeData.selectedValue,e)||this.updateSelectedValue(e,t):this.treeData.selectedValue!==e&&this.updateSelectedValue(e)},data(e){this.init(e)},selectedValue(e){this.$emit(k.CHANGE,e,this.treeData.selectedEvent),this.$emit(k.SELECTED,Array.isArray(e)?e.map((e=>this.getNode(e))):this.getNode(e))}},created(){if(this.multiple&&!Array.isArray(this.treeData.selectedValue))throw new Error("[UiTree]: The 'selectedNodes' prop must be an array in the multiple tree")},mounted(){this.$tree=new m(this.treeData),this.init()},methods:{init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;this.nodeList=this.$tree.getData(e),this.nodeList.length&&(m.setExpanded(this.treeData,this.nodeList,{autoExpandParent:this.autoExpandParent,defaultExpandedKeys:this.defaultExpandedKeys}),m.setSelected(this.treeData,this.selectedValue))},updateSelectedValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.$nextTick((()=>{t.length&&m.resetSelected(this.treeData,t),m.setSelected(this.treeData,e),this.treeData.selectedValue=e}))},updateNode(e,t,a){switch(e){case"create":m.createNode(this.treeData,t,a);break;case"delete":m.deleteNode(this.treeData,t,a);break;default:m.updateNode(this.treeData,t,a)}},getNode(e){return this.treeData.nodeMap.get(e)}}},C=y(x,(function(){var e=this,t=e._self._c;return t("div",{class:e.className},[e._t("default"),e._v(" "),t("ui-tree-node",{attrs:{children:e.nodeList,"tree-data":e.treeData},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)},[e._l(e.$slots,(function(t,a){return e._t(a,null,{slot:a})}))],2)],2)}),[],!1,null,null,null).exports;t.default=h({UiTree:C,UiTreeNode:_})}}).default}));